
import streamlit as st

ksb_questions = {'K1: Legislation & Safe Use of Data': ['Can you explain at least one piece of legislation relevant to your role (e.g. GDPR, DPA) and its key principles?', 'How do you follow this legislation in your daily work? Provide an example.', 'Why is it important to follow this legislation when handling data?', '(Distinction) What are the risks or consequences of not following this legislation?'], 'K2: Organisational Data Policies': ['What internal data policies or procedures do you follow in your organisation?', 'Where can you access these policies, and how do they affect your day-to-day work?', '(Distinction) What are the potential consequences of not following internal policies?'], 'K5: Structured vs Unstructured Data': ['Can you explain the difference between structured and unstructured data?', 'Which type of data do you work with most often?', 'How does the structure of the data impact your analysis approach?'], 'K6: Data Structures & Database Design': ["Describe three different data structures you've worked with (e.g. tables, arrays, records).", 'What kind of database architecture do you use in your role (e.g. relational, cloud)?', 'How is your database implemented and maintained?', 'How are access rights and data security managed in your database system?'], 'K7: User Experience & Domain Context': ['Why is user experience important in data analytics?', 'Describe how you tailor your insights and communication to suit your audience.', 'Explain the principles of domain context and how they impact your work.'], 'K10: Combining Data from Different Sources': ['What methods do you use to combine data from multiple sources?', 'How has combining data helped improve analysis or decision-making in your work?', 'What are the risks of combining data from different sources?'], 'K13: Principles of Statistics': ['What statistical methods do you use in your work, and why?', 'Can you explain the difference between descriptive and inferential statistics?', 'How have you applied statistical analysis to extract insight from data?'], 'K14: Descriptive, Predictive, Prescriptive Analytics': ['Explain the differences between descriptive, predictive, and prescriptive analytics.', 'How have you applied each of these in your role?', 'What are the risks and benefits of predictive analytics?'], 'K15: Ethical Aspects of Data Use': ['What ethical considerations are important when collecting data in your role?', 'How do you ensure ethical use of data (e.g. transparency, minimisation, anonymisation)?', 'Why is ethics in data handling important to your organisation?'], 'S5: Impact of User Experience': ['How have you adapted your analysis communication to improve user experience for stakeholders?', 'Give an example where stakeholder feedback influenced your work.', 'What principles did you apply to ensure domain context was considered?'], 'S9: Data Architecture Requirements': ["What tools and techniques do you use for working with your organisation's data architecture?", 'How do you ensure data security and compliance with internal standards during your work?'], 'S10: Apply Statistical Methods': ['What statistical methods have you applied in your role?', 'For each method, what insight did it provide, and how did it inform decision-making?'], 'S11: Predictive Analytics': ['Describe a time when you carried out predictive analytics in your role.', 'What process did you follow, and what did you learn from the analysis?', 'What are the risks and benefits of using predictive analytics in your work?'], 'S13: Analytical Techniques': ['Describe three analytical techniques youâ€™ve used (e.g. data mining, forecasting, regression).', 'What insight did each technique help uncover in your work?', 'How did these insights influence business decisions or improvements?'], 'S14: Data Visualisation': ['Give three examples of how you tailored visualisations for different audiences (e.g. dashboards, reports, infographics).', 'How do your visualisations improve understanding for stakeholders?', 'What principles of user experience did you consider in your presentations?'], 'B1: Professional & Secure Environment': ['How do you contribute to a secure and productive working environment?', 'Which legislation do you follow, and how do you apply it in your role?', 'What are the risks of failing to follow data protection legislation?'], 'B2: Initiative in Problem Solving': ['Describe a situation where you had to adapt quickly to an unexpected change in a project.', 'How did you take initiative to address the issue and what was the outcome?'], 'B5: Root Cause Analysis': ['Describe a problem you encountered and how you found the root cause.', "What actions did you take to ensure the issue wouldn't recur?"], 'B6: Resilience & Learning from Failure': ['Describe a challenge you faced when something didnâ€™t go as planned.', 'What did you learn from it, and how will it help you in the future?'], 'B7: Adapting to Change': ["Give an example of how you've adapted to a changing project scope or stakeholder feedback.", 'What actions did you take and how did they support the projectâ€™s success?']}

st.title("ðŸ“Š AI Assessor â€“ Data Analyst L4 Apprenticeship")
st.markdown("This chatbot simulates an assessor asking questions based on the Knowledge, Skills and Behaviours (KSBs) from the Portfolio & Evidence Guide.")

selected_ksb = st.selectbox("Choose a KSB to be assessed on:", list(ksb_questions.keys()))
questions = ksb_questions[selected_ksb]

if "step" not in st.session_state:
    st.session_state.step = 0

if st.session_state.step < len(questions):
    current_question = questions[st.session_state.step]
    st.markdown(f"**Q{st.session_state.step + 1}: {current_question}**")
    user_response = st.text_area("Your answer:", key=f"response_{st.session_state.step}")

    if st.button("Next"):
        if user_response.strip():
            st.session_state.step += 1
        else:
            st.warning("Please enter a response before proceeding.")
else:
    st.success("You've completed this KSB assessment!")
    if st.button("Restart"):
        st.session_state.step = 0
